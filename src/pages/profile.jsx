import React, { useState } from "react";
import Page from "../components/Layout/Page";
import {
  useAddress,
  useBalanceForAddress,
  useContract,
  useContractRead,
  useDisconnect,
  useSDK,
} from "@thirdweb-dev/react";
import { ACCOUNT_FACTORY_ADDRESS } from "../constants/constants";
import { useRouter } from "next/router";
import { postData } from "../helpers/postdata";

const profile = () => {
  const address = useAddress();
  const sdk = useSDK();
  const disconnect = useDisconnect();

  const router = useRouter();

  const { contract: accountFactory } = useContract(ACCOUNT_FACTORY_ADDRESS);
  const { data: usernameOfAccount } = useContractRead(
    accountFactory,
    "usernameOfAccount",
    [address]
  );

  const [imageIndex, setImageIndex] = useState(0);
  const filteredImages = postData
    .filter((post) => post.type === "dynamic" || post.type === "scribble")
    .map((post) => post.thumbnail);

  const nextImage = () => {
    setImageIndex((prevIndex) => (prevIndex + 1) % filteredImages.length);
  };

  const prevImage = () => {
    setImageIndex(
      (prevIndex) =>
        (prevIndex - 1 + filteredImages.length) % filteredImages.length
    );
  };

  return (
    <Page back="/">
      <div className="flex flex-col">
        <div className="flex flex-row px-[30px] gap-[24px] items-center mt-[30px]">
          <svg
            onClick={prevImage}
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="16"
            viewBox="0 0 17 16"
            fill="none"
            className="cursor-pointer"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M15.1733 8.00014C15.1733 7.86753 15.1207 7.74036 15.0269 7.64659C14.9331 7.55282 14.8059 7.50014 14.6733 7.50014H2.88034L6.02734 4.35414C6.12123 4.26026 6.17397 4.13292 6.17397 4.00014C6.17397 3.86737 6.12123 3.74003 6.02734 3.64614C5.93345 3.55226 5.80611 3.49951 5.67334 3.49951C5.54056 3.49951 5.41323 3.55226 5.31934 3.64614L1.31934 7.64614C1.27277 7.69259 1.23583 7.74776 1.21063 7.80851C1.18542 7.86926 1.17244 7.93438 1.17244 8.00014C1.17244 8.06591 1.18542 8.13103 1.21063 8.19178C1.23583 8.25252 1.27277 8.3077 1.31934 8.35414L5.31934 12.3541C5.41323 12.448 5.54056 12.5008 5.67334 12.5008C5.80611 12.5008 5.93345 12.448 6.02734 12.3541C6.12123 12.2603 6.17397 12.1329 6.17397 12.0001C6.17397 11.8674 6.12123 11.74 6.02734 11.6461L2.88034 8.50014H14.6733C14.8059 8.50014 14.9331 8.44746 15.0269 8.3537C15.1207 8.25993 15.1733 8.13275 15.1733 8.00014Z"
              fill="#262626"
            />
          </svg>
          <img
            src={filteredImages[imageIndex]}
            alt=""
            className="w-[241px] h-[249px] rounded-[8px]"
          />
          <svg
            onClick={nextImage}
            xmlns="http://www.w3.org/2000/svg"
            width="17"
            height="16"
            viewBox="0 0 17 16"
            fill="none"
            className="cursor-pointer"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M1.79199 8.00014C1.79199 7.86753 1.84467 7.74036 1.93844 7.64659C2.03221 7.55282 2.15938 7.50014 2.29199 7.50014H14.085L10.938 4.35414C10.8441 4.26026 10.7914 4.13292 10.7914 4.00014C10.7914 3.86737 10.8441 3.74003 10.938 3.64614C11.0319 3.55226 11.1592 3.49951 11.292 3.49951C11.4248 3.49951 11.5521 3.55226 11.646 3.64614L15.646 7.64614C15.6926 7.69259 15.7295 7.74776 15.7547 7.80851C15.7799 7.86926 15.7929 7.93438 15.7929 8.00014C15.7929 8.06591 15.7799 8.13103 15.7547 8.19178C15.7295 8.25252 15.6926 8.3077 15.646 8.35414L11.646 12.3541C11.5521 12.448 11.4248 12.5008 11.292 12.5008C11.1592 12.5008 11.0319 12.448 10.938 12.3541C10.8441 12.2603 10.7914 12.1329 10.7914 12.0001C10.7914 11.8674 10.8441 11.74 10.938 11.6461L14.085 8.50014H2.29199C2.15938 8.50014 2.03221 8.44746 1.93844 8.3537C1.84467 8.25993 1.79199 8.13275 1.79199 8.00014Z"
              fill="#262626"
            />
          </svg>
        </div>
        <div className="flex flex-row gap-[50px] w-full justify-center my-[30px]">
          <div className="flex flex-col gap-[10px] items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                d="M4.99991 17.841C5.15561 17.9973 5.27491 18.186 5.34932 18.3937C5.42373 18.6014 5.45142 18.8229 5.43041 19.0425C5.32499 20.0589 5.12512 21.0632 4.83341 22.0425C6.92591 21.558 8.20391 20.997 8.78441 20.703C9.11367 20.5362 9.49284 20.4967 9.84941 20.592C10.8716 20.8645 11.9251 21.0017 12.9829 21C18.9769 21 23.4829 16.7895 23.4829 12C23.4829 7.212 18.9769 3 12.9829 3C6.98891 3 2.48291 7.212 2.48291 12C2.48291 14.202 3.40841 16.245 4.99991 17.841ZM4.26041 23.6985C3.90501 23.769 3.54846 23.8335 3.19091 23.892C2.89091 23.94 2.66291 23.628 2.78141 23.349C2.9146 23.0349 3.03667 22.7162 3.14741 22.3935L3.15191 22.3785C3.52391 21.2985 3.82691 20.0565 3.93791 18.9C2.09741 17.055 0.98291 14.64 0.98291 12C0.98291 6.201 6.35591 1.5 12.9829 1.5C19.6099 1.5 24.9829 6.201 24.9829 12C24.9829 17.799 19.6099 22.5 12.9829 22.5C11.7944 22.5016 10.6108 22.3473 9.46241 22.041C8.68241 22.4355 7.00391 23.154 4.26041 23.6985Z"
                fill="black"
              />
            </svg>
            <span>24</span>
          </div>
          <div className="flex flex-col gap-[10px] items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                d="M12.248 22.5C9.46327 22.5 6.79256 21.3938 4.82343 19.4246C2.85429 17.4555 1.74805 14.7848 1.74805 12C1.74805 9.21523 2.85429 6.54451 4.82343 4.57538C6.79256 2.60625 9.46327 1.5 12.248 1.5C15.0328 1.5 17.7035 2.60625 19.6727 4.57538C21.6418 6.54451 22.748 9.21523 22.748 12C22.748 14.7848 21.6418 17.4555 19.6727 19.4246C17.7035 21.3938 15.0328 22.5 12.248 22.5ZM12.248 24C15.4306 24 18.4829 22.7357 20.7333 20.4853C22.9838 18.2348 24.248 15.1826 24.248 12C24.248 8.8174 22.9838 5.76516 20.7333 3.51472C18.4829 1.26428 15.4306 0 12.248 0C9.06545 0 6.0132 1.26428 3.76277 3.51472C1.51233 5.76516 0.248047 8.8174 0.248047 12C0.248047 15.1826 1.51233 18.2348 3.76277 20.4853C6.0132 22.7357 9.06545 24 12.248 24Z"
                fill="black"
              />
              <path
                d="M6.67576 14.3505C6.84802 14.251 7.05273 14.2241 7.24486 14.2756C7.43699 14.3271 7.6008 14.4527 7.70026 14.625C8.16093 15.4235 8.82384 16.0866 9.62225 16.5474C10.4207 17.0082 11.3264 17.2505 12.2483 17.25C13.1701 17.2505 14.0759 17.0082 14.8743 16.5474C15.6727 16.0866 16.3356 15.4235 16.7963 14.625C16.8451 14.539 16.9106 14.4636 16.9887 14.4029C17.0669 14.3423 17.1563 14.2978 17.2517 14.2719C17.3472 14.246 17.4468 14.2392 17.5449 14.2519C17.643 14.2647 17.7376 14.2967 17.8233 14.3462C17.9089 14.3956 17.9839 14.4615 18.044 14.5401C18.1041 14.6187 18.1481 14.7084 18.1733 14.804C18.1986 14.8996 18.2047 14.9993 18.1913 15.0973C18.1779 15.1953 18.1453 15.2897 18.0953 15.375C17.5029 16.4015 16.6507 17.2539 15.6242 17.8464C14.5978 18.4389 13.4334 18.7505 12.2483 18.75C11.0631 18.7505 9.89871 18.4389 8.87227 17.8464C7.84584 17.2539 6.99358 16.4015 6.40126 15.375C6.30181 15.2027 6.27486 14.998 6.32634 14.8059C6.37781 14.6138 6.50351 14.45 6.67576 14.3505ZM10.7483 9.75C10.7483 10.992 10.0763 12 9.24826 12C8.42026 12 7.74826 10.992 7.74826 9.75C7.74826 8.508 8.42026 7.5 9.24826 7.5C10.0763 7.5 10.7483 8.508 10.7483 9.75ZM16.7483 9.75C16.7483 10.992 16.0763 12 15.2483 12C14.4203 12 13.7483 10.992 13.7483 9.75C13.7483 8.508 14.4203 7.5 15.2483 7.5C16.0763 7.5 16.7483 8.508 16.7483 9.75Z"
                fill="black"
              />
            </svg>
            <span>102</span>
          </div>
          <div className="flex flex-col gap-[10px] items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                d="M5.48291 3.75C5.48291 2.75544 5.878 1.80161 6.58126 1.09835C7.28452 0.395088 8.23835 0 9.23291 0C10.2275 0 11.1813 0.395088 11.8846 1.09835C12.5878 1.80161 12.9829 2.75544 12.9829 3.75C12.9829 2.75544 13.378 1.80161 14.0813 1.09835C14.7845 0.395088 15.7383 0 16.7329 0C17.7275 0 18.6813 0.395088 19.3846 1.09835C20.0878 1.80161 20.4829 2.75544 20.4829 3.75V3.759C20.4829 3.864 20.4829 4.164 20.4259 4.5H23.4829C23.8807 4.5 24.2623 4.65804 24.5436 4.93934C24.8249 5.22064 24.9829 5.60218 24.9829 6V9C24.9829 9.39782 24.8249 9.77936 24.5436 10.0607C24.2623 10.342 23.8807 10.5 23.4829 10.5V21.75C23.4829 22.3467 23.2459 22.919 22.8239 23.341C22.4019 23.7629 21.8296 24 21.2329 24H4.73291C4.13617 24 3.56388 23.7629 3.14192 23.341C2.71996 22.919 2.48291 22.3467 2.48291 21.75V10.5C2.08509 10.5 1.70355 10.342 1.42225 10.0607C1.14095 9.77936 0.98291 9.39782 0.98291 9V6C0.98291 5.60218 1.14095 5.22064 1.42225 4.93934C1.70355 4.65804 2.08509 4.5 2.48291 4.5H5.53991C5.50029 4.25502 5.48122 4.00716 5.48291 3.759V3.75ZM7.08491 4.5H11.4829V3.75C11.4829 3.45453 11.4247 3.16194 11.3116 2.88896C11.1986 2.61598 11.0328 2.36794 10.8239 2.15901C10.615 1.95008 10.3669 1.78434 10.0939 1.67127C9.82097 1.5582 9.52838 1.5 9.23291 1.5C8.93744 1.5 8.64486 1.5582 8.37187 1.67127C8.09889 1.78434 7.85085 1.95008 7.64192 2.15901C7.43299 2.36794 7.26725 2.61598 7.15418 2.88896C7.04111 3.16194 6.98291 3.45453 6.98291 3.75C6.98291 3.8775 6.98591 4.161 7.05041 4.395C7.05942 4.43077 7.07095 4.46586 7.08491 4.5ZM14.4829 4.5H18.8809C18.8947 4.4658 18.9062 4.43072 18.9154 4.395C18.9799 4.161 18.9829 3.8775 18.9829 3.75C18.9829 3.15326 18.7459 2.58097 18.3239 2.15901C17.9019 1.73705 17.3296 1.5 16.7329 1.5C16.1362 1.5 15.5639 1.73705 15.1419 2.15901C14.72 2.58097 14.4829 3.15326 14.4829 3.75V4.5ZM2.48291 6V9H11.4829V6H2.48291ZM14.4829 6V9H23.4829V6H14.4829ZM21.9829 10.5H14.4829V22.5H21.2329C21.4318 22.5 21.6226 22.421 21.7632 22.2803C21.9039 22.1397 21.9829 21.9489 21.9829 21.75V10.5ZM11.4829 22.5V10.5H3.98291V21.75C3.98291 21.9489 4.06193 22.1397 4.20258 22.2803C4.34323 22.421 4.534 22.5 4.73291 22.5H11.4829Z"
                fill="black"
              />
            </svg>
            <span>24</span>
          </div>
          <div className="flex flex-col gap-[10px] items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="25"
              height="24"
              viewBox="0 0 25 24"
              fill="none"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M0.98291 5.25C0.98291 5.05109 1.06193 4.86032 1.20258 4.71967C1.34323 4.57902 1.534 4.5 1.73291 4.5H2.48291C5.78591 4.5 8.22341 6.36 9.79391 8.127C10.5289 8.955 11.0914 9.78 11.4829 10.425C11.8729 9.78 12.4369 8.955 13.1719 8.127C14.7424 6.36 17.1799 4.5 20.4829 4.5V6C17.7859 6 15.7234 7.515 14.2939 9.123C13.521 9.9985 12.8571 10.9646 12.3169 12C12.8566 13.0354 13.52 14.0014 14.2924 14.877C15.7249 16.485 17.7889 18 20.4829 18V19.5C17.1799 19.5 14.7424 17.64 13.1719 15.873C12.5412 15.1592 11.9759 14.3901 11.4829 13.575C11.0929 14.22 10.5289 15.045 9.79391 15.873C8.22341 17.64 5.78591 19.5 2.48291 19.5H1.73291C1.534 19.5 1.34323 19.421 1.20258 19.2803C1.06193 19.1397 0.98291 18.9489 0.98291 18.75C0.98291 18.5511 1.06193 18.3603 1.20258 18.2197C1.34323 18.079 1.534 18 1.73291 18H2.48291C5.17991 18 7.24241 16.485 8.67191 14.877C9.44486 14.0015 10.1087 13.0354 10.6489 12C10.1092 10.9646 9.44583 9.99858 8.67341 9.123C7.24091 7.515 5.17691 6 2.48291 6H1.73291C1.534 6 1.34323 5.92098 1.20258 5.78033C1.06193 5.63968 0.98291 5.44891 0.98291 5.25Z"
                fill="black"
              />
              <path
                d="M20.4829 8.19913V2.30113C20.4829 2.22987 20.5033 2.1601 20.5415 2.09998C20.5798 2.03986 20.6343 1.99188 20.6989 1.96166C20.7634 1.93144 20.8352 1.92024 20.9059 1.92935C20.9765 1.93847 21.0432 1.96753 21.0979 2.01313L24.6379 4.96213C24.8179 5.11213 24.8179 5.38813 24.6379 5.53813L21.0979 8.48713C21.0432 8.53273 20.9765 8.56179 20.9059 8.57091C20.8352 8.58002 20.7634 8.56881 20.6989 8.5386C20.6343 8.50838 20.5798 8.4604 20.5415 8.40028C20.5033 8.34016 20.4829 8.27038 20.4829 8.19913ZM20.4829 21.6991V15.8011C20.4829 15.7299 20.5033 15.6601 20.5415 15.6C20.5798 15.5399 20.6343 15.4919 20.6989 15.4617C20.7634 15.4314 20.8352 15.4202 20.9059 15.4293C20.9765 15.4385 21.0432 15.4675 21.0979 15.5131L24.6379 18.4621C24.8179 18.6121 24.8179 18.8881 24.6379 19.0381L21.0979 21.9871C21.0432 22.0327 20.9765 22.0618 20.9059 22.0709C20.8352 22.08 20.7634 22.0688 20.6989 22.0386C20.6343 22.0084 20.5798 21.9604 20.5415 21.9003C20.5033 21.8402 20.4829 21.7704 20.4829 21.6991Z"
                fill="black"
              />
            </svg>
            <span>5</span>
          </div>
        </div>
        <div className="flex flex-row justify-between items-center h-[60px] border-black border-y px-[38px]">
          <div className="flex flex-row items-center gap-[10px]">
            <img src="/icons/coin.svg" alt="" />
            <span className="text-black text-[16px]">Earnings</span>
          </div>
          <span className="text-black text-[16px]">23</span>
        </div>
        <div className="flex flex-col gap-[10px] justify-center h-[90px] border-black border-b px-[38px]">
          {/* Username */}
          <p>{usernameOfAccount}</p>
          <div className="flex flex-row gap-[16px] items-center">
            {address && (
              <a
                href={`https://testnet.bscscan.com/address/${address}`}
                target="_blank"
                rel="noopener noreferrer"
                className="flex flex-row items-center gap-[4px] text-blue-500 hover:text-blue-600 text-[12px]"
              >
                {address}
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="13"
                  height="13"
                  viewBox="0 0 13 13"
                  fill="none"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M7.24995 2.67383C7.24995 2.57437 7.21044 2.47899 7.14011 2.40866C7.06979 2.33834 6.97441 2.29883 6.87495 2.29883H1.89795C1.59958 2.29883 1.31343 2.41735 1.10245 2.62833C0.891476 2.83931 0.772949 3.12546 0.772949 3.42383L0.772949 10.9238C0.772949 11.2222 0.891476 11.5083 1.10245 11.7193C1.31343 11.9303 1.59958 12.0488 1.89795 12.0488H9.39795C9.69632 12.0488 9.98247 11.9303 10.1934 11.7193C10.4044 11.5083 10.5229 11.2222 10.5229 10.9238V5.94683C10.5229 5.84737 10.4834 5.75199 10.4131 5.68166C10.3428 5.61134 10.2474 5.57183 10.1479 5.57183C10.0485 5.57183 9.95311 5.61134 9.88278 5.68166C9.81246 5.75199 9.77295 5.84737 9.77295 5.94683V10.9238C9.77295 11.0233 9.73344 11.1187 9.66311 11.189C9.59279 11.2593 9.49741 11.2988 9.39795 11.2988H1.89795C1.79849 11.2988 1.70311 11.2593 1.63278 11.189C1.56246 11.1187 1.52295 11.0233 1.52295 10.9238V3.42383C1.52295 3.32437 1.56246 3.22899 1.63278 3.15866C1.70311 3.08834 1.79849 3.04883 1.89795 3.04883H6.87495C6.97441 3.04883 7.06979 3.00932 7.14011 2.93899C7.21044 2.86867 7.24995 2.77328 7.24995 2.67383Z"
                    fill="black"
                  />
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M12.7729 0.423828C12.7729 0.324372 12.7334 0.228989 12.6631 0.158663C12.5928 0.0883369 12.4974 0.0488281 12.3979 0.0488281L8.64793 0.0488281C8.54848 0.0488281 8.4531 0.0883369 8.38277 0.158663C8.31244 0.228989 8.27293 0.324372 8.27293 0.423828C8.27293 0.523284 8.31244 0.618667 8.38277 0.688993C8.4531 0.759319 8.54848 0.798828 8.64793 0.798828H11.4927L5.38243 6.90833C5.34757 6.94319 5.31991 6.98459 5.30104 7.03014C5.28217 7.0757 5.27246 7.12452 5.27246 7.17383C5.27246 7.22314 5.28217 7.27196 5.30104 7.31752C5.31991 7.36307 5.34757 7.40446 5.38243 7.43933C5.4173 7.47419 5.45869 7.50185 5.50425 7.52072C5.5498 7.53959 5.59863 7.5493 5.64793 7.5493C5.69724 7.5493 5.74607 7.53959 5.79162 7.52072C5.83718 7.50185 5.87857 7.47419 5.91343 7.43933L12.0229 1.32908V4.17383C12.0229 4.27328 12.0624 4.36867 12.1328 4.43899C12.2031 4.50932 12.2985 4.54883 12.3979 4.54883C12.4974 4.54883 12.5928 4.50932 12.6631 4.43899C12.7334 4.36867 12.7729 4.27328 12.7729 4.17383V0.423828Z"
                    fill="black"
                  />
                </svg>
              </a>
            )}
          </div>
        </div>
        <div className="flex flex-row justify-end">
          <button
            onClick={async () => {
              await disconnect();
              router.push("/wallet");
            }}
            className="mx-[10px] h-[40px] w-[135px] mt-[10px] bg-black text-white rounded-lg hover:bg-gray-300"
          >
            Sign Out
          </button>
        </div>
      </div>
    </Page>
  );
};

export default profile;
